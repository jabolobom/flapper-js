import{h as m}from"./kaplay-CpR_OpMc.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();const e=m({width:1e3,height:600,canvas:document.getElementById("canvas")});e.setLayers(["bg","obj","ui"],"obj");const c=e.loadFont("VCR","fonts/VCR_OSD_MONO_1.001.ttf");e.loadSound("jump1","sounds/JUMP1-F.wav");e.loadSound("jump2","sounds/JUMP2-G.wav");e.loadSound("hit","sounds/HIT-F#.wav");e.loadSprite("player","sprites/winged_dude_sheet.png",{sliceX:2,sliceY:0,anims:{flap:{from:0,to:1,loop:!0}}});e.loadSprite("building","sprites/building.png");e.loadSprite("bg","sprites/background.png");e.scene("game_over",({score:i})=>{e.add([e.sprite("bg"),e.layer("bg")]);const r=e.width()/2,a=e.height()/2;e.add([e.text("Game Over",{size:64,font:c}),e.color(255,0,0),pos(r,a-64),e.anchor("center"),e.layer("ui")]),e.add([e.text(`Final Score: ${i}`,{size:32,font:c}),pos(r,a),e.anchor("center"),e.layer("ui")]),e.add([e.text("Press SPACE to start again.",{size:32,font:c}),pos(r,a+64),e.anchor("center"),e.layer("ui")]),e.onKeyPress(["space","z"],()=>{e.go("main")})});e.scene("main",()=>{e.add([e.sprite("bg"),e.layer("bg")]);let i=0;const r=1200,a=e.width()/2,l=e.height()/2;let t=!1,o=!1,n=0;const p=140,d=e.add([e.sprite("player",{frame:1}),e.pos(a,l),e.area(),e.layer("obj"),"player"]);e.onKeyPress(["space","z"],()=>{o=!0,e.play("jump1"),i=-450,d.play("flap")});const g=e.add([e.text(`Score: ${n}`,{size:32,font:c}),pos(a,64),e.anchor("center"),e.layer("ui")]);function h(){const s=e.rand(p,e.height()-p),f=e.width()+64;e.add([e.sprite("building",{width:64,height:e.height()}),e.pos(f,s+p/2),e.area(),"pipe",{passed:!1},e.layer("obj")]),e.add([e.sprite("building",{width:64,height:e.height()}),e.pos(f,s-p/2-e.height()),e.area(),"pipe",e.layer("obj")])}function u(s){e.go("game_over",{score:s})}e.onUpdate(()=>{!t&&o&&(i+=r*e.dt(),d.pos.y+=i*e.dt()),d.pos.y>e.height()&&(d.pos.y=e.height(),i=0,t=!0,u(n)),d.pos.y<0&&(d.pos.y=0,i=0)}),e.loop(1.2,()=>{!t&&o&&h()}),e.onUpdate("pipe",s=>{!t&&o&&(s.move(-220,0*e.dt()),s.pos.x<-64&&e.destroy(s),s.pos.x<d.pos.x&&!s.passed&&(s.passed=!0,n+=.5,g.text=`Score: ${n}`))}),e.onCollide("player","pipe",()=>{t=!0,u(n)})});e.scene("start_menu",()=>{e.add([e.sprite("bg"),e.layer("bg")]);const i=e.width()/2,r=e.height()/2;e.add([e.text("Press SPACE to start!",{size:64,font:c}),pos(i,r),anchor("center"),e.layer("ui")]),e.onKeyPress(["space"],()=>{e.go("main")})});e.go("start_menu");
//# sourceMappingURL=index-Djuh4Fk_.js.map
